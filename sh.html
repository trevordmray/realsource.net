<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Stockholder Dataroom</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light only">
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-slate-100 text-slate-900" data-page="SH">

  <!-- Top Bar -->
  <header class="sticky top-0 z-40 bg-white/90 backdrop-blur border-b border-slate-200">
    <div class="mx-auto max-w-3xl px-4 py-3 flex items-center gap-3">
      <div class="shrink-0 rounded-xl bg-slate-900 text-white px-2.5 py-1 text-xs font-semibold">SH</div>
      <h1 class="text-sm sm:text-base font-semibold">RealSource Properties • Stockholder Dataroom</h1>
      <div class="ml-auto text-[11px] text-slate-500 hidden sm:block">Last updated: 11/12/2025</div>
    </div>
  </header>

  <main class="mx-auto max-w-3xl px-4 py-6">

    <!-- Search -->
    <section class="mb-4">
      <div class="rounded-2xl bg-white border border-slate-200 p-4 sm:p-5 shadow-sm">
        <div class="flex flex-col sm:flex-row sm:items-center gap-3">
          <div class="relative w-full">
            <input id="filter"
                   type="search"
                   placeholder="Search documents (e.g., Annex B, 10-K, 10-Q, MD&A, Pro Forma)"
                   class="w-full rounded-lg border border-slate-300 px-3 py-2 pr-9 text-sm focus:outline-none focus:ring-2 focus:ring-slate-400" />
            <svg class="pointer-events-none absolute right-2 top-2.5 h-5 w-5 text-slate-400" viewBox="0 0 24 24" fill="none">
              <path stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round"
                    d="m21 21-4.3-4.3M17 10a7 7 0 1 1-14 0 7 7 0 0 1 14 0Z"/>
            </svg>
          </div>
          <div class="text-[11px] text-slate-500">Tip: type a letter (A–M), “10-K”, “10-Q”, “MD&A”, or “Pro Forma”.</div>
        </div>
      </div>
    </section>

    <!-- Highlight: PPM -->
    <section class="mb-5">
      <a href="https://realsource451.sharepoint.com/:b:/g/EY94WlZnhx5LvXVBjtvihBwBGUSUucUh8nPSsB55Xk11Lw?e=TmfY3J"
         target="_blank"
         class="block rounded-2xl border border-indigo-200 bg-indigo-50 p-4 sm:p-5 hover:bg-indigo-100 transition shadow-sm">
        <div class="flex items-start gap-3">
          <span class="inline-flex rounded-md bg-indigo-600 text-white text-xs font-semibold px-2 py-1">PPM</span>
          <div>
            <div class="text-sm sm:text-base font-semibold text-slate-900">
              Consent Solicitation Statement / Private Placement Memorandum (Nov 12, 2025)
            </div>
            <div class="mt-0.5 text-xs text-slate-700">Primary disclosure document covering the proposed transactions.</div>
          </div>
        </div>
      </a>
    </section>

    <!-- NEW: Written Consent for Stockholders -->
    <section class="mb-5">
      <a href="https://realsource451.sharepoint.com/:b:/g/Eagf7WRd-NpCjA9svUtvbasBX-8PanG6FbFMDLOSPUnMMA?e=4jbW6r"
         target="_blank"
         class="doc-card block rounded-2xl border border-emerald-200 bg-emerald-50 p-4 sm:p-5 hover:bg-emerald-100 transition shadow-sm"
         data-tags="consent stockholder written consent vote sign execute rs stockholders">
        <div class="flex items-start gap-3">
          <span class="inline-flex rounded-md bg-emerald-600 text-white text-xs font-semibold px-2 py-1">Action</span>
          <div>
            <div class="text-sm sm:text-base font-semibold text-slate-900">
              RealSource Properties, Inc. — Written Consent of the Stockholders
            </div>
            <div class="mt-0.5 text-xs text-slate-700">
              Click to open the official Stockholder Written Consent form.
            </div>
          </div>
        </div>
      </a>
    </section>

    <!-- Notice -->
    <section class="mb-6">
      <a href="https://realsource451.sharepoint.com/:b:/g/Eb1cbowaGr5JhD347gIg1iwBeoWPbWPJVmkc_Sn7YpQGOg?e=tmrxi1"
         target="_blank"
         class="doc-card block rounded-xl border border-slate-200 bg-white p-4 hover:bg-slate-50 transition shadow-sm"
         data-tags="notice stockholder solicitation written consent notice stockholders">
        <div class="flex items-start gap-3">
          <span class="inline-flex rounded-md bg-slate-900 text-white text-[10px] font-semibold px-2 py-1">Notice</span>
          <div>
            <div class="text-sm font-semibold">Notice of Solicitation of Written Consent of Stockholders</div>
            <div class="mt-0.5 text-xs text-slate-600">Notice and materials relating to stockholder voting.</div>
          </div>
        </div>
      </a>
    </section>

    <!-- Annexes -->
    <section class="space-y-3" id="annex-list">

      <!-- Annex A-1 -->
      <a href="https://realsource451.sharepoint.com/:b:/g/Ebvg0PMEkbpLoQklLi-u3I8B4h3pIjSevso_SfWfGvNS6g?e=c4vLMT"
         target="_blank"
         class="doc-card block rounded-xl border border-slate-200 bg-white p-4 hover:bg-slate-50 transition shadow-sm"
         data-tags="annex a-1 agreement merger june 25 2025 plan of merger">
        <div class="flex items-start gap-3">
          <span class="inline-flex rounded-md bg-slate-800 text-white text-[10px] font-semibold px-2 py-1">Annex A-1</span>
          <div>
            <div class="text-sm font-semibold">Agreement and Plan of Merger (June 25, 2025)</div>
            <div class="mt-0.5 text-xs text-slate-600">Full merger agreement.</div>
          </div>
        </div>
      </a>

      <!-- Annex A-2 -->
      <a href="https://realsource451.sharepoint.com/:b:/g/Ead8yV4a6zhJiwJ_0P00e_sBKvqiyReHLww80h7A-ZlDbw?e=81sAur"
         target="_blank"
         class="doc-card block rounded-xl border border-slate-200 bg-white p-4 hover:bg-slate-50 transition shadow-sm"
         data-tags="annex a-2 amendment merger nov 12 2025">
        <div class="flex items-start gap-3">
          <span class="inline-flex rounded-md bg-slate-800 text-white text-[10px] font-semibold px-2 py-1">Annex A-2</span>
          <div>
            <div class="text-sm font-semibold">Amendment to Merger Agreement (Nov 12, 2025)</div>
            <div class="mt-0.5 text-xs text-slate-600">Amendment to A-1.</div>
          </div>
        </div>
      </a>

      <!-- Annex B -->
      <a href="https://realsource451.sharepoint.com/:b:/g/Ee9-4d8k4JdNrLYmKbbjDyQBf28mrmHqbeDhamstbV7k7g?e=7oULix"
         target="_blank"
         class="doc-card block rounded-xl border border-slate-200 bg-white p-4 hover:bg-slate-50 transition shadow-sm"
         data-tags="annex b internalization management agreement">
        <div class="flex items-start gap-3">
          <span class="inline-flex rounded-md bg-slate-800 text-white text-[10px] font-semibold px-2 py-1">Annex B</span>
          <div>
            <div class="text-sm font-semibold">Internalization Agreement</div>
            <div class="mt-0.5 text-xs text-slate-600">Management internalization details.</div>
          </div>
        </div>
      </a>

      <!-- Annex C -->
      <a href="https://realsource451.sharepoint.com/:b:/g/ERjfGr_aZMhCub6eqZ9QrgEBHMDmcoaXBybup1o9SQ1HyA?e=LkqoSd"
         target="_blank"
         class="doc-card block rounded-xl border border-slate-200 bg-white p-4 hover:bg-slate-50 transition shadow-sm"
         data-tags="annex c advisor fairness opinion board financial opinion">
        <div class="flex items-start gap-3">
          <span class="inline-flex rounded-md bg-slate-800 text-white text-[10px] font-semibold px-2 py-1">Annex C</span>
          <div>
            <div class="text-sm font-semibold">Opinion of RS Board’s Financial Advisor</div>
            <div class="mt-0.5 text-xs text-slate-600">Advisor opinion.</div>
          </div>
        </div>
      </a>

      <!-- Annex D -->
      <a href="https://realsource451.sharepoint.com/:b:/g/ESjJBHJga7tAgkmlVnorqrkB_S01FopoCcw3csQKig3dXw?e=grBCcB"
         target="_blank"
         class="doc-card block rounded-xl border border-slate-200 bg-white p-4 hover:bg-slate-50 transition shadow-sm"
         data-tags="annex d cci annual report 10-k december 31 2024">
        <div class="flex items-start gap-3">
          <span class="inline-flex rounded-md bg-slate-800 text-white text-[10px] font-semibold px-2 py-1">Annex D</span>
          <div>
            <div class="text-sm font-semibold">CCI Annual Report on Form 10-K (Dec 31, 2024)</div>
            <div class="mt-0.5 text-xs text-slate-600">CCI annual financials.</div>
          </div>
        </div>
      </a>

      <!-- Annex E -->
      <a href="https://realsource451.sharepoint.com/:b:/g/EcFhFB4GsUJJjWQaza8jROwBjttmWevYMRE71-zFtOybfQ"
         target="_blank"
         class="doc-card block rounded-xl border border-slate-200 bg-white p-4 hover:bg-slate-50 transition shadow-sm"
         data-tags="annex e cci quarterly report 10-q june 30 2025">
        <div class="flex items-start gap-3">
          <span class="inline-flex rounded-md bg-slate-800 text-white text-[10px] font-semibold px-2 py-1">Annex E</span>
          <div>
            <div class="text-sm font-semibold">CCI Quarterly Report on Form 10-Q (June 30, 2025)</div>
            <div class="mt-0.5 text-xs text-slate-600">CCI quarterly filing.</div>
          </div>
        </div>
      </a>

      <!-- Annex F -->
      <a href="https://realsource451.sharepoint.com/:b:/g/EWCz18cBlvFGr0fLN8jbrkQBmAW1nqZEXGRsDoTAVBytXw?e=slxbA6"
         target="_blank"
         class="doc-card block rounded-xl border border-slate-200 bg-white p-4 hover:bg-slate-50 transition shadow-sm"
         data-tags="annex f crop financial statements">
        <div class="flex items-start gap-3">
          <span class="inline-flex rounded-md bg-slate-800 text-white text-[10px] font-semibold px-2 py-1">Annex F</span>
          <div>
            <div class="text-sm font-semibold">CROP Financial Statements</div>
            <div class="mt-0.5 text-xs text-slate-600">CROP financials.</div>
          </div>
        </div>
      </a>

      <!-- Annex G -->
      <a href="https://realsource451.sharepoint.com/:b:/g/EXhbnF0WWzRAm36MFDfgBZoB0rxaLSBG1MGMhb9RToPE2A?e=1jxZEI"
         target="_blank"
         class="doc-card block rounded-xl border border-slate-200 bg-white p-4 hover:bg-slate-50 transition shadow-sm"
         data-tags="annex g rs financial statements rs inc">
        <div class="flex items-start gap-3">
          <span class="inline-flex rounded-md bg-slate-800 text-white text-[10px] font-semibold px-2 py-1">Annex G</span>
          <div>
            <div class="text-sm font-semibold">RS Financial Statements</div>
            <div class="mt-0.5 text-xs text-slate-600">Financial statements for RealSource Properties, Inc.</div>
          </div>
        </div>
      </a>

      <!-- Annex H -->
      <a href="https://realsource451.sharepoint.com/:b:/g/EeFHPg56Ql1KrwMB7S0dmFEB18vHsSOC0NG13HVibZVCXw?e=CAGSHh"
         target="_blank"
         class="doc-card block rounded-xl border border-slate-200 bg-white p-4 hover:bg-slate-50 transition shadow-sm"
         data-tags="annex h rsop financial statements rsop lp">
        <div class="flex items-start gap-3">
          <span class="inline-flex rounded-md bg-slate-800 text-white text-[10px] font-semibold px-2 py-1">Annex H</span>
          <div>
            <div class="text-sm font-semibold">RSOP Financial Statements</div>
            <div class="mt-0.5 text-xs text-slate-600">Financial statements for RealSource Properties OP, LP.</div>
          </div>
        </div>
      </a>

      <!-- Annex I -->
      <a href="https://realsource451.sharepoint.com/:b:/g/EQPAgbCS8LJOqJOlhFarvGkBDni9zGnAUSdtfy_8J_-0Xg?e=BxZIum"
         target="_blank"
         class="doc-card block rounded-xl border border-slate-200 bg-white p-4 hover:bg-slate-50 transition shadow-sm"
         data-tags="annex i mdna md&a rs parties management discussion analysis">
        <div class="flex items-start gap-3">
          <span class="inline-flex rounded-md bg-slate-800 text-white text-[10px] font-semibold px-2 py-1">Annex I</span>
          <div>
            <div class="text-sm font-semibold">Management’s Discussion &amp; Analysis (RS Parties)</div>
            <div class="mt-0.5 text-xs text-slate-600">Operational and financial discussion.</div>
          </div>
        </div>
      </a>

      <!-- Annex J -->
      <a href="https://realsource451.sharepoint.com/:b:/g/EaCKxKQ7GCZKmylS3_nzqe4BEh2cqBJror90MPjTfskmqw?e=fgZNRk"
         target="_blank"
         class="doc-card block rounded-xl border border-slate-200 bg-white p-4 hover:bg-slate-50 transition shadow-sm"
         data-tags="annex j rsm financial statements rsm">
        <div class="flex items-start gap-3">
          <span class="inline-flex rounded-md bg-slate-800 text-white text-[10px] font-semibold px-2 py-1">Annex J</span>
          <div>
            <div class="text-sm font-semibold">RSM Financial Statements</div>
            <div class="mt-0.5 text-xs text-slate-600">Financial statements for RSM.</div>
          </div>
        </div>
      </a>

      <!-- Annex K -->
      <a href="https://realsource451.sharepoint.com/:b:/g/EYMnSH36b6NPvXXzhY1LR4UBGdS8lTTrsu8hhMaM3kc7_A?e=yxprfT"
         target="_blank"
         class="doc-card block rounded-xl border border-slate-200 bg-white p-4 hover:bg-slate-50 transition shadow-sm"
         data-tags="annex k advisor financial statements rs advisor">
        <div class="flex items-start gap-3">
          <span class="inline-flex rounded-md bg-slate-800 text-white text-[10px] font-semibold px-2 py-1">Annex K</span>
          <div>
            <div class="text-sm font-semibold">RS Advisor Financial Statements</div>
            <div class="mt-0.5 text-xs text-slate-600">Financial statements for RS Advisor.</div>
          </div>
        </div>
      </a>

      <!-- Annex L -->
      <a href="https://realsource451.sharepoint.com/:b:/g/EYKuW3QdhXtNmfm6XHk6rFMBF2W1UauTXuj67XDUXPhMkA?e=zZnHMQ"
         target="_blank"
         class="doc-card block rounded-xl border border-slate-200 bg-white p-4 hover:bg-slate-50 transition shadow-sm"
         data-tags="annex l property manager financial statements rs property manager">
        <div class="flex items-start gap-3">
          <span class="inline-flex rounded-md bg-slate-800 text-white text-[10px] font-semibold px-2 py-1">Annex L</span>
          <div>
            <div class="text-sm font-semibold">RS Property Manager Financial Statements</div>
            <div class="mt-0.5 text-xs text-slate-600">Financials for RS Property Manager.</div>
          </div>
        </div>
      </a>

      <!-- Annex M -->
      <a href="https://realsource451.sharepoint.com/:b:/g/EYjpsyTpHGxMuyFC3g33FEABNCScCIRMcjwTcLVS3pgOGg?e=n59jqA"
         target="_blank"
         class="doc-card block rounded-xl border border-slate-200 bg-white p-4 hover:bg-slate-50 transition shadow-sm"
         data-tags="annex m pro forma unaudited combined company partnership">
        <div class="flex items-start gap-3">
          <span class="inline-flex rounded-md bg-slate-800 text-white text-[10px] font-semibold px-2 py-1">Annex M</span>
          <div>
            <div class="text-sm font-semibold">Unaudited Pro Forma Financial Information — Combined Company &amp; Partnership</div>
            <div class="mt-0.5 text-xs text-slate-600">Pro forma combined financials.</div>
          </div>
        </div>
      </a>

    </section>

    <!-- Footer -->
    <section class="mt-6 text-[11px] text-slate-500">
      This material is confidential and intended solely for the recipient in connection with evaluating the proposed transaction.
      Do not distribute without prior written consent.
    </section>
  </main>

  <!-- ID Gate -->
  <div id="visit-gate" class="fixed inset-0 z-50 hidden">
    <div class="absolute inset-0 bg-slate-900/70"></div>
    <div class="relative z-10 min-h-screen flex items-center justify-center p-4">
      <div class="w-full max-w-md bg-white rounded-2xl shadow-2xl border border-slate-200 p-6">

        <h2 class="text-lg font-semibold text-slate-900 mb-2">Access Agreement</h2>

        <p class="text-sm text-slate-600 mb-3">
          By accessing the documents on this website, the undersigned hereby:
          (i) acknowledges that the undersigned has received notice of the solicitation of written consents in connection with the transactions described in the confidential consent solicitation statement/private placement memorandum dated November 12, 2025 (“Consent Solicitation Statement/PPM”), which has been prepared by RealSource Properties, Inc. (“RS”), RealSource Properties OP, LP (“RSOP”), Cottonwood Communities, Inc. and Cottonwood Residential O.P., LP;
          (ii) waives any notice requirements under the governing documents of RS or RSOP, as applicable; and
          (iii) acknowledges that the documents on this website are confidential and proprietary and are being provided on a confidential basis solely to RS stockholders and RSOP limited partners as described in the Consent Solicitation Statement/PPM under the heading “Important Information and Notices.”
        </p>

        <form id="visit-gate-form" class="mt-3 space-y-4">
          <label class="flex items-start gap-2 text-sm text-slate-700">
            <input required type="checkbox" class="mt-0.5">
            <span>Acknowledged and agreed</span>
          </label>

          <div>
            <label class="block text-sm font-medium text-slate-700">Full Name</label>
            <input required name="name" type="text" autocomplete="name"
                   class="mt-1 w-full rounded-lg border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-slate-400" />
          </div>

          <button id="visit-gate-submit" type="submit"
                  class="w-full rounded-lg bg-slate-900 text-white text-sm font-medium py-2.5 hover:bg-slate-800 disabled:opacity-60 flex items-center justify-center gap-2">
            Continue
          </button>

          <p id="visit-gate-error" class="text-xs text-red-600 hidden"></p>
        </form>
      </div>
    </div>
  </div>

  <!-- Consent Info Modal -->
  <div id="consent-info-modal" class="fixed inset-0 z-50 hidden">
    <div class="absolute inset-0 bg-slate-900/70" aria-hidden="true"></div>
    <div class="relative z-10 min-h-screen flex items-center justify-center p-4">
      <div class="w-full max-w-md bg-white rounded-2xl shadow-2xl border border-slate-200 p-6">

        <h2 class="text-lg font-semibold text-slate-900 mb-2">How to Submit Your Consent</h2>

        <p class="text-sm text-slate-600 mb-4">
          We are implementing an electronic signature solution, which will be available in the next 24 hours.
        </p>
        <p class="text-sm text-slate-600 mb-4">
          For now, you are welcome to view the PDF. If you wish to submit it immediately, please:
        </p>
        <ul class="list-decimal list-inside text-sm text-slate-600 mb-5 space-y-1">
          <li>Open and print the PDF.</li>
          <li>Sign the printed form.</li>
          <li>Email a scanned copy to: <br><strong>scottw@realsource.net</strong></li>
        </ul>

        <div class="flex flex-col sm:flex-row-reverse gap-3">
          <button id="consent-continue-btn" type="button"
            class="w-full sm:w-auto rounded-lg bg-slate-900 text-white text-sm font-medium py-2.5 px-4 hover:bg-slate-800">
            Continue to PDF
          </button>
          <button id="consent-cancel-btn" type="button"
            class="w-full sm:w-auto rounded-lg border border-slate-300 bg-white text-slate-800 text-sm font-medium py-2.5 px-4 hover:bg-slate-50">
            Cancel
          </button>
        </div>

      </div>
    </div>
  </div>

  <!-- Filter + Logging -->
  <script>
  (function () {

    const LOG_ENDPOINT = "https://script.google.com/macros/s/AKfycbwtwtmEYGQMkiDVVrNlqKI3AEJiQuDTxFAGNBkc0cbe1jhgw1MLo_e5QIvSDmDsFZGA5A/exec";
    const page = document.body.getAttribute('data-page') || 'SH';
    const STORAGE_KEY = `rs_gate_${page}`;
    const gate = document.getElementById('visit-gate');

    // --- START: MODAL HELPER FUNCTIONS ---
    function showModal(modalElement) {
      if (modalElement) {
        modalElement.classList.remove('hidden');
        document.body.style.overflow = 'hidden';
      }
    }

    function hideModal(modalElement) {
      if (modalElement) {
        modalElement.classList.add('hidden');
        document.body.style.overflow = '';
      }
    }
    // --- END: MODAL HELPER FUNCTIONS ---

    try { 
      if (!localStorage.getItem(STORAGE_KEY)) {
        showModal(gate); // Use helper function
      }
    }
    catch (_) { 
      showModal(gate); // Use helper function
    }

    // Filter
    const filterInput = document.getElementById('filter');
    const cards = Array.from(document.querySelectorAll('.doc-card'));
    filterInput.addEventListener('input', (e) => {
      const q = e.target.value.trim().toLowerCase();
      cards.forEach(card => {
        const tags = (card.getAttribute('data-tags') || '').toLowerCase();
        const text = card.textContent.toLowerCase();
        card.style.display = (!q || tags.includes(q) || text.includes(q)) ? '' : 'none';
      });
    });

    // --- START: NEW MODAL LOGIC ---

    // Find the link for the Written Consent
    const consentLink = document.querySelector('a[data-tags*="consent stockholder written consent"]');
    // Find the new modal
    const consentModal = document.getElementById('consent-info-modal');
    
    // Only run if both the link and modal exist on the page
    if (consentLink && consentModal) {
      const consentContinueBtn = document.getElementById('consent-continue-btn');
      const consentCancelBtn = document.getElementById('consent-cancel-btn');

      // 1. When the "Written Consent" link is clicked:
      consentLink.addEventListener('click', function(e) {
        // Stop the link from opening immediately
        e.preventDefault();
        // Show the info modal
        showModal(consentModal); // Use helper function
      });

      // 2. If user clicks "Continue to PDF":
      consentContinueBtn.addEventListener('click', function() {
        // Hide the modal
        hideModal(consentModal); // Use helper function
        // Manually open the PDF link in a new tab (which was the original action)
        window.open(consentLink.href, '_blank');
      });

      // 3. If user clicks "Cancel":
      consentCancelBtn.addEventListener('click', function() {
        // Just hide the modal
        hideModal(consentModal); // Use helper function
      });
    }

    // --- END: NEW MODAL LOGIC ---

    // JSONP
    function jsonp(url, params, ok, errFn) {
      const cb = `cb_${Date.now()}_${Math.floor(Math.random() * 1e6)}`;
      window[cb] = function(resp) {
        try { delete window[cb]; } catch (_) {}
        script.remove();
        ok(resp);
      };
      const qs = new URLSearchParams({...params, callback: cb}).toString();
      const script = document.createElement('script');
      script.src = `${url}?${qs}`;
      script.async = true;
      script.onerror = () => {
        try { delete window[cb]; } catch (_) {}
        script.remove();
        errFn(new Error("Network/JSONP error"));
      };
      document.head.appendChild(script);
    }

    function getIP(done, fail) {
      jsonp("https://api.ipify.org", {format: "jsonp"}, r => done(r?.ip || ""), fail);
    }

    function logVisit(p, ok, fail) {
      jsonp(LOG_ENDPOINT, p, ok, fail);
    }

    // Gate form
    const form = document.getElementById('visit-gate-form');
    const submit = document.getElementById('visit-gate-submit');
    const err = document.getElementById('visit-gate-error');

    form.addEventListener('submit', function(e){
      e.preventDefault();
      err.classList.add('hidden');

      const name = (new FormData(form).get('name') || '').trim();
      if (!name) {
        err.textContent = "Please enter your name.";
        err.classList.remove('hidden');
        return;
      }

      submit.disabled = true;
      const original = submit.innerHTML;
      submit.innerHTML = `
        <div class="flex items-center gap-2">
          <div class="h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin"></div>
          <span>Logging...</span>
        </div>`;

      const ref = document.referrer || "";
      const ref_url = window.location.href;

      getIP(ip => {

        const payload = {name, page, ua: navigator.userAgent, ref, ref_url, ip};

        logVisit(payload, () => {
          try { localStorage.setItem(STORAGE_KEY, JSON.stringify({name, ts: Date.now()})); } catch(_){}
          hideModal(gate); // Use helper function
          submit.innerHTML = original;
          submit.disabled = false;
        }, errMsg => {
          err.textContent = `Could not record your visit. (${errMsg})`;
          err.classList.remove('hidden');
          submit.innerHTML = original;
          submit.disabled = false;
        });

      }, () => {
        const payload = {name, page, ua: navigator.userAgent, ref, ref_url, ip: ""};
        logVisit(payload, () => {
          try { localStorage.setItem(STORAGE_KEY, JSON.stringify({name, ts: Date.now()})); } catch(_){}
          hideModal(gate); // Use helper function
          submit.innerHTML = original;
          submit.disabled = false;
        }, errMsg => {
          err.textContent = `Could not record your visit. (${errMsg})`;
          err.classList.remove('hidden');
          submit.innerHTML = original;
          submit.disabled = false;
        });
      });

    });

  })();
  </script>

</body>
</html>
